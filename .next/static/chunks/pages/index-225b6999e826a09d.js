(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(9828)}])},9828:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return t}});var a=l(5893),n=l(7294),i=l(9008),r=l.n(i),c=l(1664),o=l.n(c);function t(){let[e,s]=(0,n.useState)({name:"",gender:"male",dob:"",weight:"",height:"",kneeHeight:"",answers:{appetite:"",weight_change:"",mobility:"",stress:"",neuro:"",bmi:"",living:"",medication:"",pressure_ulcers:"",meals:"",dairy:"",legumes:"",meat:"",vegetables:"",fluid:"",feeding_mode:"",nutrition_problem:"",health_comparison:"",mac:"",cc:""}}),[l,i]=(0,n.useState)(!1),[c,t]=(0,n.useState)(null),[m,d]=(0,n.useState)(!1),h=e=>{let{name:l,value:a}=e.target;if(l.includes(".")){let[e,n]=l.split(".");s(s=>({...s,[e]:{...s[e],[n]:a}}))}else s(e=>({...e,[l]:a}))},u=()=>{let s=0,l=e.answers;"severe"===l.appetite?s+=0:"moderate"===l.appetite?s+=1:"none"===l.appetite&&(s+=2),"severe"===l.weight_change?s+=0:"unknown"===l.weight_change?s+=1:"moderate"===l.weight_change?s+=2:"none"===l.weight_change&&(s+=3),"bed"===l.mobility?s+=0:"limited"===l.mobility?s+=1:"normal"===l.mobility&&(s+=2),"yes"===l.stress?s+=0:"no"===l.stress&&(s+=2),"severe"===l.neuro?s+=0:"mild"===l.neuro?s+=1:"none"===l.neuro&&(s+=2),"low"===l.bmi?s+=0:"medium_low"===l.bmi?s+=1:"medium_high"===l.bmi?s+=2:"high"===l.bmi&&(s+=3),"yes"===l.living?s+=1:"no"===l.living&&(s+=0),"yes"===l.medication?s+=1:"no"===l.medication&&(s+=0),"yes"===l.pressure_ulcers?s+=1:"no"===l.pressure_ulcers&&(s+=0),"one"===l.meals?s+=0:"two"===l.meals?s+=1:"three"===l.meals&&(s+=2);let a=0;return"yes"===l.dairy&&(a+=1),"yes"===l.legumes&&(a+=1),"yes"===l.meat&&(a+=1),a<=1?s+=0:2===a?s+=.5:s+=1,"yes"===l.vegetables?s+=1:"no"===l.vegetables&&(s+=0),"low"===l.fluid?s+=0:"medium"===l.fluid?s+=.5:"high"===l.fluid&&(s+=1),"assisted"===l.feeding_mode?s+=0:"difficult"===l.feeding_mode?s+=1:"independent"===l.feeding_mode&&(s+=2),"severe"===l.nutrition_problem?s+=0:"mild"===l.nutrition_problem?s+=1:"none"===l.nutrition_problem&&(s+=2),"worse"===l.health_comparison?s+=0:"unknown"===l.health_comparison?s+=.5:"same"===l.health_comparison?s+=1:"better"===l.health_comparison&&(s+=2),"low"===l.mac?s+=0:"medium"===l.mac?s+=.5:"high"===l.mac&&(s+=1),"low"===l.cc?s+=0:"high"===l.cc&&(s+=1),s},x=e=>e>=24?"營養狀況良好":e>=17?"具營養不良危險性":"營養不良",j=async l=>{l.preventDefault(),i(!0),t(null),d(!1);try{let l=u(),a=x(l),n={...e,totalScore:l,status:a,createdAt:new Date().toISOString()};if(!(await fetch("/api/assessments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok)throw Error("提交失敗");d(!0),s({name:"",gender:"male",dob:"",weight:"",height:"",kneeHeight:"",answers:{appetite:"",weight_change:"",mobility:"",stress:"",neuro:"",bmi:"",living:"",medication:"",pressure_ulcers:"",meals:"",dairy:"",legumes:"",meat:"",vegetables:"",fluid:"",feeding_mode:"",nutrition_problem:"",health_comparison:"",mac:"",cc:""}})}catch(e){console.error("提交錯誤:",e),t(e.message)}finally{i(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:"MNA 迷你營養評估表"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css",rel:"stylesheet"})]}),(0,a.jsxs)("div",{className:"container mt-5",children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,a.jsx)("h1",{children:"MNA 迷你營養評估表"}),(0,a.jsx)(o(),{href:"/statistics",className:"btn btn-info",children:"查看統計"})]}),c&&(0,a.jsx)("div",{className:"alert alert-danger",role:"alert",children:c}),m&&(0,a.jsx)("div",{className:"alert alert-success",role:"alert",children:"評估表提交成功！"}),(0,a.jsxs)("form",{onSubmit:j,children:[(0,a.jsx)("div",{className:"card mb-4",children:(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("h5",{className:"card-title",children:"基本資料"}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"col-md-4 mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"姓名"}),(0,a.jsx)("input",{type:"text",className:"form-control",name:"name",value:e.name,onChange:h,required:!0})]}),(0,a.jsxs)("div",{className:"col-md-4 mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"性別"}),(0,a.jsxs)("select",{className:"form-select",name:"gender",value:e.gender,onChange:h,required:!0,children:[(0,a.jsx)("option",{value:"male",children:"男"}),(0,a.jsx)("option",{value:"female",children:"女"})]})]}),(0,a.jsxs)("div",{className:"col-md-4 mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"出生日期"}),(0,a.jsx)("input",{type:"date",className:"form-control",name:"dob",value:e.dob,onChange:h,required:!0})]})]}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"col-md-4 mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"體重(公斤)"}),(0,a.jsx)("input",{type:"number",className:"form-control",name:"weight",value:e.weight,onChange:h,required:!0})]}),(0,a.jsxs)("div",{className:"col-md-4 mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"身高(公分)"}),(0,a.jsx)("input",{type:"number",className:"form-control",name:"height",value:e.height,onChange:h,required:!0})]}),(0,a.jsxs)("div",{className:"col-md-4 mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"膝高度(公分)"}),(0,a.jsx)("input",{type:"number",className:"form-control",name:"kneeHeight",value:e.kneeHeight,onChange:h,required:!0})]})]})]})}),(0,a.jsx)("div",{className:"card mb-4",children:(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("h5",{className:"card-title",children:"營養篩檢"}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"1. 過去三個月之中，是否因食慾不佳消化問題、咀嚼或吞嚥困難以致進食量越來越少？"}),(0,a.jsxs)("select",{className:"form-select",name:"answers.appetite",value:e.answers.appetite,onChange:h,required:!0,children:[(0,a.jsx)("option",{value:"",children:"請選擇"}),(0,a.jsx)("option",{value:"severe",children:"嚴重食慾不佳 (0分)"}),(0,a.jsx)("option",{value:"moderate",children:"中度食慾不佳 (1分)"}),(0,a.jsx)("option",{value:"none",children:"食慾無變化 (2分)"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"2. 近三個月體重變化"}),(0,a.jsxs)("select",{className:"form-select",name:"answers.weight_change",value:e.answers.weight_change,onChange:h,required:!0,children:[(0,a.jsx)("option",{value:"",children:"請選擇"}),(0,a.jsx)("option",{value:"severe",children:"體重減輕＞3公斤 (0分)"}),(0,a.jsx)("option",{value:"unknown",children:"不知道 (1分)"}),(0,a.jsx)("option",{value:"moderate",children:"體重減輕1~3公斤 (2分)"}),(0,a.jsx)("option",{value:"none",children:"體重無改變 (3分)"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"3. 行動力"}),(0,a.jsxs)("select",{className:"form-select",name:"answers.mobility",value:e.answers.mobility,onChange:h,required:!0,children:[(0,a.jsx)("option",{value:"",children:"請選擇"}),(0,a.jsx)("option",{value:"bed",children:"臥床或輪椅 (0分)"}),(0,a.jsx)("option",{value:"limited",children:"可以下床活動或離開輪椅但無法自由走動 (1分)"}),(0,a.jsx)("option",{value:"normal",children:"可以自由走動 (2分)"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"4. 過去三個月內曾有精神性壓力或急性疾病發作"}),(0,a.jsxs)("select",{className:"form-select",name:"answers.stress",value:e.answers.stress,onChange:h,required:!0,children:[(0,a.jsx)("option",{value:"",children:"請選擇"}),(0,a.jsx)("option",{value:"yes",children:"是 (0分)"}),(0,a.jsx)("option",{value:"no",children:"否 (2分)"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"5. 神經精神問題"}),(0,a.jsxs)("select",{className:"form-select",name:"answers.neuro",value:e.answers.neuro,onChange:h,required:!0,children:[(0,a.jsx)("option",{value:"",children:"請選擇"}),(0,a.jsx)("option",{value:"severe",children:"嚴重癡呆或抑鬱 (0分)"}),(0,a.jsx)("option",{value:"mild",children:"輕度癡呆 (1分)"}),(0,a.jsx)("option",{value:"none",children:"無精神問題 (2分)"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"6. 身體質量指數(BMI)"}),(0,a.jsxs)("select",{className:"form-select",name:"answers.bmi",value:e.answers.bmi,onChange:h,required:!0,children:[(0,a.jsx)("option",{value:"",children:"請選擇"}),(0,a.jsx)("option",{value:"low",children:"BMI＜19 (0分)"}),(0,a.jsx)("option",{value:"medium_low",children:"19≦BMI＜21 (1分)"}),(0,a.jsx)("option",{value:"medium_high",children:"21≦BMI＜23 (2分)"}),(0,a.jsx)("option",{value:"high",children:"BMI≧23 (3分)"})]})]})]})}),(0,a.jsx)("div",{className:"card mb-4",children:(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("h5",{className:"card-title",children:"一般評估"}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"7. 可以獨立生活 (非住在護理之家或醫院)"}),(0,a.jsxs)("select",{className:"form-select",name:"answers.living",value:e.answers.living,onChange:h,required:!0,children:[(0,a.jsx)("option",{value:"",children:"請選擇"}),(0,a.jsx)("option",{value:"yes",children:"是 (1分)"}),(0,a.jsx)("option",{value:"no",children:"否 (0分)"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"8. 每天需服用三種以上的處方"}),(0,a.jsxs)("select",{className:"form-select",name:"answers.medication",value:e.answers.medication,onChange:h,required:!0,children:[(0,a.jsx)("option",{value:"",children:"請選擇"}),(0,a.jsx)("option",{value:"yes",children:"是 (1分)"}),(0,a.jsx)("option",{value:"no",children:"否 (0分)"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"9. 褥瘡或皮膚潰瘍"}),(0,a.jsxs)("select",{className:"form-select",name:"answers.pressure_ulcers",value:e.answers.pressure_ulcers,onChange:h,required:!0,children:[(0,a.jsx)("option",{value:"",children:"請選擇"}),(0,a.jsx)("option",{value:"yes",children:"是 (1分)"}),(0,a.jsx)("option",{value:"no",children:"否 (0分)"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"10. 一天中可以吃幾餐完整的餐食"}),(0,a.jsxs)("select",{className:"form-select",name:"answers.meals",value:e.answers.meals,onChange:h,required:!0,children:[(0,a.jsx)("option",{value:"",children:"請選擇"}),(0,a.jsx)("option",{value:"one",children:"1餐 (0分)"}),(0,a.jsx)("option",{value:"two",children:"2餐 (1分)"}),(0,a.jsx)("option",{value:"three",children:"3餐 (2分)"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"11. 蛋白質攝取量"}),(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{className:"form-check-input",type:"checkbox",name:"answers.dairy",checked:"yes"===e.answers.dairy,onChange:e=>h({target:{name:"answers.dairy",value:e.target.checked?"yes":"no"}})}),(0,a.jsx)("label",{className:"form-check-label",children:"每天至少攝取一份乳製品(牛奶、乳酪、優酪乳)"})]})}),(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{className:"form-check-input",type:"checkbox",name:"answers.legumes",checked:"yes"===e.answers.legumes,onChange:e=>h({target:{name:"answers.legumes",value:e.target.checked?"yes":"no"}})}),(0,a.jsx)("label",{className:"form-check-label",children:"每周攝取兩份以上的豆類或蛋類"})]})}),(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{className:"form-check-input",type:"checkbox",name:"answers.meat",checked:"yes"===e.answers.meat,onChange:e=>h({target:{name:"answers.meat",value:e.target.checked?"yes":"no"}})}),(0,a.jsx)("label",{className:"form-check-label",children:"每天均吃些肉、魚、雞、鴨類"})]})})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"12. 每天至少攝取二份或二份以上的蔬菜或水果"}),(0,a.jsxs)("select",{className:"form-select",name:"answers.vegetables",value:e.answers.vegetables,onChange:h,required:!0,children:[(0,a.jsx)("option",{value:"",children:"請選擇"}),(0,a.jsx)("option",{value:"yes",children:"是 (1分)"}),(0,a.jsx)("option",{value:"no",children:"否 (0分)"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"13. 每天攝取多少液體(包括白開水、果汁、咖啡、茶、牛奶)"}),(0,a.jsxs)("select",{className:"form-select",name:"answers.fluid",value:e.answers.fluid,onChange:h,required:!0,children:[(0,a.jsx)("option",{value:"",children:"請選擇"}),(0,a.jsx)("option",{value:"low",children:"少於3杯 (0分)"}),(0,a.jsx)("option",{value:"medium",children:"3－5杯 (0.5分)"}),(0,a.jsx)("option",{value:"high",children:"大於5杯 (1.0分)"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"14. 進食的形式"}),(0,a.jsxs)("select",{className:"form-select",name:"answers.feeding_mode",value:e.answers.feeding_mode,onChange:h,required:!0,children:[(0,a.jsx)("option",{value:"",children:"請選擇"}),(0,a.jsx)("option",{value:"assisted",children:"無人協助則無法進食 (0分)"}),(0,a.jsx)("option",{value:"difficult",children:"可以自己進食但較吃力 (1分)"}),(0,a.jsx)("option",{value:"independent",children:"可以自己進食 (2分)"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"15. 他們覺得自己營養方面有沒有問題？"}),(0,a.jsxs)("select",{className:"form-select",name:"answers.nutrition_problem",value:e.answers.nutrition_problem,onChange:h,required:!0,children:[(0,a.jsx)("option",{value:"",children:"請選擇"}),(0,a.jsx)("option",{value:"severe",children:"覺得自己營養非常不好 (0分)"}),(0,a.jsx)("option",{value:"mild",children:"不太清楚或營養不太好 (1分)"}),(0,a.jsx)("option",{value:"none",children:"覺得自己沒有營養問題 (2分)"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"16. 與其他同年齡的人比較，他們認為自己的健康狀況如何？"}),(0,a.jsxs)("select",{className:"form-select",name:"answers.health_comparison",value:e.answers.health_comparison,onChange:h,required:!0,children:[(0,a.jsx)("option",{value:"",children:"請選擇"}),(0,a.jsx)("option",{value:"worse",children:"不如同年齡的人 (0分)"}),(0,a.jsx)("option",{value:"unknown",children:"不知道 (0.5分)"}),(0,a.jsx)("option",{value:"same",children:"和同年齡的人差不多 (1.0分)"}),(0,a.jsx)("option",{value:"better",children:"比同年齡的人好 (2.0分)"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"17. 臂中圍MAC(公分)"}),(0,a.jsxs)("select",{className:"form-select",name:"answers.mac",value:e.answers.mac,onChange:h,required:!0,children:[(0,a.jsx)("option",{value:"",children:"請選擇"}),(0,a.jsx)("option",{value:"low",children:"MAC＜21 (0分)"}),(0,a.jsx)("option",{value:"medium",children:"MAC21-21.9 (0.5分)"}),(0,a.jsx)("option",{value:"high",children:"MAC≧22 (1.0分)"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"18. 小腿圍C.C.(公分)"}),(0,a.jsxs)("select",{className:"form-select",name:"answers.cc",value:e.answers.cc,onChange:h,required:!0,children:[(0,a.jsx)("option",{value:"",children:"請選擇"}),(0,a.jsx)("option",{value:"low",children:"C.C.＜31 (0分)"}),(0,a.jsx)("option",{value:"high",children:"C.C.≧31 (1分)"})]})]})]})}),(0,a.jsx)("div",{className:"d-grid gap-2",children:(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"提交中...":"提交評估表"})})]})]})]})}}},function(e){e.O(0,[996,888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);